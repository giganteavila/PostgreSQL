Las funciones que se muestran en [la Tabla 9.101](https://www.postgresql.org/docs/current/functions-admin.html#FUNCTIONS-ADMIN-GENFILE-TABLE) proporcionan acceso nativo a los archivos de la máquina que alberga el  servidor. Sólo archivos dentro del directorio de clúster de la base de  datos y el  `log_directory`se puede acceder, a menos que el usuario sea un superusuario o se le conceda el papel `pg_read_server_files`. Utilíce una ruta relativa para archivos en el directorio de clúster, y una ruta que coinzca con el  `log_directory`Configuración para archivos de registro.

Tenga en cuenta que la concesión a los usuarios del privilegio EXECUTE en `pg_read_file()`, o funciones relacionadas, les permite la posibilidad de leer cualquier  archivo en el servidor que el proceso del servidor de base de datos  pueda leer; estas funciones evitan todas las comprobaciones de  privilegios en la base de datos. Esto significa que, por ejemplo, un  usuario con dicho acceso es capaz de leer el contenido de la  `pg_authid`tabla donde se almacena la información de autenticación, así como leer  cualquier dato de tabla en la base de datos. Por lo tanto, debe  considerarse cuidadosamente la posibilidad de acceder a estas funciones.

Al conceder privilegios en estas funciones, tenga en cuenta que  las entradas de la tabla que muestran parámetros opcionales se  implementan principalmente como varias funciones físicas con diferentes  listas de parámetros. El privilegio debe concederse por separado en cada función de este tipo, si se quiere utilizar. psql 's  `\df`El comando puede ser útil para comprobar cuáles son las firmas de la función real.

Algunas de estas funciones se hacen con una opción  *`missing_ok`*parámetro, que especifica el comportamiento cuando el archivo o directorio no existe. Si `true`, la función devuelve  `NULL`o un conjunto de resultados vacíos, según corresponda. Si `false`, se levanta un error. (Notas de fallos que no sean el archivo no encontrado se reportan como errores en cualquier caso.) El incumplimiento es `false`.

**Cuadro 9.101. Funciones de acceso a archivos genéricos**

| Función                Descripción                           |
| ------------------------------------------------------------ |
| `pg_ls_dir`(   *`dirname`*`text`[,  *`missing_ok`*`boolean`,   *`include_dot_dirs`*`boolean`] . `setof text`                Devuelve los nombres de todos los archivos (y directorios y otros archivos especiales) en el directorio especificado. El  *`include_dot_dirs`*El parámetro indica si se “.”“..”deben incluir en el conjunto de resultados: el predeterminado es excluirlos. Incluirlos puede ser útil cuando  *`missing_ok`*es `true`, para distinguir un directorio vacío de un directorio inexistente.                Esta función se limita a los superusuarios por defecto, pero otros usuarios pueden recibir EXECUTE para ejecutar la función. |
| `pg_ls_logdir`()  `setof record`(  *`name`*`text`,  *`size`*`bigint`,   *`modification`*`timestamp with time zone`)                Devuelve el nombre, tamaño y última hora de  modificación (mtime) de cada archivo ordinario en el directorio de  registro del servidor. Se excluyen las Filenames que comienzan con un  punto, directorios y otros archivos especiales.                Esta función se limita a los superusuarios y funciones con privilegios de la  `pg_monitor`Funcionar por defecto, pero a otros usuarios se les puede conceder EXECUTE para ejecutar la función. |
| `pg_ls_waldir`()  `setof record`(  *`name`*`text`,  *`size`*`bigint`,   *`modification`*`timestamp with time zone`)                Devuelve el nombre, tamaño y última hora de  modificación (mtime) de cada archivo ordinario en el directorio de  registro de escritores (WAL) del servidor. Se excluyen las Filenames que comienzan con un punto, directorios y otros archivos especiales.                Esta función se limita a los superusuarios y funciones con privilegios de la  `pg_monitor`Funcionar por defecto, pero a otros usuarios se les puede conceder EXECUTE para ejecutar la función. |
| `pg_ls_logicalmapdir`()  `setof record`(  *`name`*`text`,  *`size`*`bigint`,   *`modification`*`timestamp with time zone`)                Devuelve el nombre, tamaño y último tiempo de modificación (mtime) de cada archivo ordinario en el servidor  `pg_logical/mappings`Directorio. Se excluyen las Filenames que comienzan con un punto, directorios y otros archivos especiales.                Esta función se limita a los superusuarios y a los miembros de la  `pg_monitor`Funcionar por defecto, pero a otros usuarios se les puede conceder EXECUTE para ejecutar la función. |
| `pg_ls_logicalsnapdir`()  `setof record`(  *`name`*`text`,  *`size`*`bigint`,   *`modification`*`timestamp with time zone`)                Devuelve el nombre, tamaño y último tiempo de modificación (mtime) de cada archivo ordinario en el servidor  `pg_logical/snapshots`Directorio. Se excluyen las Filenames que comienzan con un punto, directorios y otros archivos especiales.                Esta función se limita a los superusuarios y a los miembros de la  `pg_monitor`Funcionar por defecto, pero a otros usuarios se les puede conceder EXECUTE para ejecutar la función. |
| `pg_ls_replslotdir`(   *`slot_name`*`text`) .  `setof record`(  *`name`*`text`,  *`size`*`bigint`,   *`modification`*`timestamp with time zone`)                Devuelve el nombre, tamaño y último tiempo de modificación (mtime) de cada archivo ordinario en el servidor  `pg_replslot/slot_name`directorio, dónde  *`slot_name`*es el nombre de la ranura de replicación proporcionado como entrada de la  función. Se excluyen las Filenames que comienzan con un punto,  directorios y otros archivos especiales.                Esta función se limita a los superusuarios y a los miembros de la  `pg_monitor`Funcionar por defecto, pero a otros usuarios se les puede conceder EXECUTE para ejecutar la función. |
| `pg_ls_archive_statusdir`()  `setof record`(  *`name`*`text`,  *`size`*`bigint`,   *`modification`*`timestamp with time zone`)                Devuelve el nombre, tamaño y última hora de  modificación (mtime) de cada archivo ordinario en el directorio de  estado de archivo WAL del servidor (`pg_wal/archive_status`). Se excluyen las Filenames que comienzan con un punto, directorios y otros archivos especiales.                Esta función se limita a los superusuarios y a los miembros de la  `pg_monitor`Funcionar por defecto, pero a otros usuarios se les puede conceder EXECUTE para ejecutar la función. |
| `pg_ls_tmpdir`( [   *`tablespace`*`oid`] .  `setof record`(  *`name`*`text`,  *`size`*`bigint`,   *`modification`*`timestamp with time zone`)                Devuelve el nombre, tamaño y última hora de  modificación (mtime) de cada archivo ordinario en el directorio de  archivos temporal para el especificado *`tablespace`*. Si  *`tablespace`*no se proporciona,  `pg_default`El espacio de mesa se examina. Se excluyen las Filenames que comienzan con un punto, directorios y otros archivos especiales.                Esta función se limita a los superusuarios y a los miembros de la  `pg_monitor`Funcionar por defecto, pero a otros usuarios se les puede conceder EXECUTE para ejecutar la función. |
| `pg_read_file`(   *`filename`*`text`[,  *`offset`*`bigint`,   *`length`*`bigint`] [,   *`missing_ok`*`boolean`] . `text`                Devuelve la totalidad o parte de un archivo de texto, comenzando en el byte dado *`offset`*, regresando como mucho  *`length`*bytes (menos si se alcanza el final del archivo primero). Si  *`offset`*es negativo, es relativo al final del archivo. Si  *`offset`*y  *`length`*se omiten, todo el archivo se devuelve. Los bytes leídos del archivo se  interpretan como una cadena en la codificación de la base de datos; se  lanza un error si no son válidos en esa codificación.                Esta función se limita a los superusuarios por defecto, pero otros usuarios pueden recibir EXECUTE para ejecutar la función. |
| `pg_read_binary_file`(   *`filename`*`text`[,  *`offset`*`bigint`,   *`length`*`bigint`] [,   *`missing_ok`*`boolean`] . `bytea`                Devuelve la totalidad o parte de un archivo. Esta función es idéntica a  `pg_read_file`excepto que puede leer datos binarios arbitrarios, devolviendo el resultado como  `bytea`no `text`; en consecuencia, no se realicen controles de codificación.                Esta función se limita a los superusuarios por defecto, pero otros usuarios pueden recibir EXECUTE para ejecutar la función.                En combinación con la  `convert_from`función, esta función se puede utilizar para leer un archivo de texto en una  codificación especificada y convertir a la codificación de la base de  datos:                `SELECT convert.from(pg.read.binry.file.file(in.utf8.txt'), 'UTF8');` |
| `pg_stat_file`(   *`filename`*`text`[,   *`missing_ok`*`boolean`] .  `record`(  *`size`*`bigint`,  *`access`*`timestamp with time zone`,  *`modification`*`timestamp with time zone`,  *`change`*`timestamp with time zone`,  *`creation`*`timestamp with time zone`,   *`isdir`*`boolean`)                Devuelve un registro que contiene el tamaño del  archivo, el sello de la última hora de acceso, el sello de tiempo de la  última modificación, el último sello de cambio de estado de archivo  (sólo plataformasUnix), el sello de tiempo de creación de archivos (sólo Windows), y una bandera que indica si se trata de un directorio.                Esta función se limita a los superusuarios por defecto, pero otros usuarios pueden recibir EXECUTE para ejecutar la función. |