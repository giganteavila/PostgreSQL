Las funciones que se muestran en el [cuadro 9.92](https://www.postgresql.org/docs/current/functions-admin.html#FUNCTIONS-RECOVERY-INFO-TABLE) proporcionan información sobre el estado actual de un servidor de  espera. Estas funciones pueden ejecutarse tanto durante la recuperación  como en la carrera normal.

**Cuadro 9.92. Funciones de la información de recuperación**

| Función                Descripción                           |
| ------------------------------------------------------------ |
| `pg_is_in_recovery`() `boolean`                Devuelve cierto si la recuperación aún está en curso. |
| `pg_last_wal_receive_lsn`() `pg_lsn`                Devuelve la última ubicación de registro de escritura que ha sido recibida y sincronizada al disco mediante la replicación en streaming. Mientras que la replicación en streaming está en curso, esto aumentará monóónicamente. Si la recuperación se ha completado, esto  permanecerá estático en la ubicación del último registro WAL recibido y  sincronizado en el disco durante la recuperación. Si la replicación del  streaming está desactivada, o si aún no ha comenzado, la función  devuelve `NULL`. |
| `pg_last_wal_replay_lsn`() `pg_lsn`                Devuelve la última ubicación de registro de escritura que se ha vuelto a reproducir durante la recuperación. Si la  recuperación todavía está en curso esto aumentará monóónicamente. Si la  recuperación se ha completado, esto permanecerá estático en la ubicación del último registro WAL aplicado durante la recuperación. Cuando el  servidor se ha iniciado normalmente sin recuperación, la función  devuelve `NULL`. |
| `pg_last_xact_replay_timestamp`() `timestamp with time zone`                Devuelve el sello de tiempo de la última transacción  reprobada durante la recuperación. Este es el momento en que se generó  el registro de commit o abort WAL para esa transacción en la primaria.  Si no se han reproducido transacciones durante la recuperación, la  función devuelve `NULL`. De lo contrario, si la recuperación aún está en curso, esto aumentará  monóónicamente. Si la recuperación se ha completado, esto seguirá siendo estático en el momento de la última transacción aplicada durante la  recuperación. Cuando el servidor se ha iniciado normalmente sin  recuperación, la función devuelve `NULL`. |
| `pg_get_wal_resource_managers`()  `setof record`(  *`rm_id`*`integer`,  *`rm_name`*`text`,   *`rm_builtin`*`boolean`)                Devuelve los gestores de recursos WAL distribuidos actualmente en el sistema. La columna  *`rm_builtin`*indica si se trata de un gestor de recursos incorporado, o un gestor de recursos personalizado cargado por una extensión. |

Las funciones que se muestran en el [cuadro 9.93](https://www.postgresql.org/docs/current/functions-admin.html#FUNCTIONS-RECOVERY-CONTROL-TABLE) controlan el progreso de la recuperación. Estas funciones sólo se pueden ejecutar durante la recuperación.

**Cuadro 9.93. Funciones de control de recuperación**

| Función                Descripción                           |
| ------------------------------------------------------------ |
| `pg_is_wal_replay_paused`() `boolean`                Devuelve cierto si se solicita una pausa de recuperación. |
| `pg_get_wal_replay_pause_state`() `text`                Devuelve el estado de la pausa de recuperación. Los valores de retorno son  `not paused`si no se solicita una pausa,  `pause requested`si se solicita una pausa, pero la recuperación aún no se detiene, y  `paused`si la recuperación se detiene. |
| `pg_promote`(    *`wait`*`boolean``DEFAULT``true`,     *`wait_seconds`*`integer``DEFAULT``60`) . `boolean`                Promuela un servidor de reserva a la categoría primaria. Con  *`wait`*establecido en  `true`(el default), la función espera hasta completar la promoción o  *`wait_seconds`*segundos han pasado, y devuelve  `true`si la promoción tiene éxito y  `false`de otra manera. Si  *`wait`*está listo para `false`, la función devuelve  `true`inmediatamente después de enviar un  `SIGUSR1`señal al postmaster para activar la promoción.                Esta función se limita a los superusuarios por defecto, pero otros usuarios pueden recibir EXECUTE para ejecutar la función. |
| `pg_wal_replay_pause`() `void`                Solicito para detener la recuperación. Una petición  no significa que la recuperación se detenga de inmediato. Si quieres una garantía de que la recuperación se detiene realmente, tienes que  comprobar el estado de pausa de recuperación devuelto por `pg_get_wal_replay_pause_state()`. Tenga en cuenta que  `pg_is_wal_replay_paused()`Devuelve si se hace una solicitud. Si bien la recuperación se detiene, no se  aplican nuevos cambios en la base de datos. Si el standby caliente está  activo, todas las nuevas consultas verán la misma instantánea  consistente de la base de datos, y no se generarán más conflictos de  consultas hasta que se reanude la recuperación.                Esta función se limita a los superusuarios por defecto, pero otros usuarios pueden recibir EXECUTE para ejecutar la función. |
| `pg_wal_replay_resume`() `void`                Reinicia la recuperación si se detuvo.                Esta función se limita a los superusuarios por defecto, pero otros usuarios pueden recibir EXECUTE para ejecutar la función. |

 `pg_wal_replay_pause`y  `pg_wal_replay_resume`no se puede ejecutar mientras se está llevando a cabo una promoción. Si se desencadenó un ascenso mientras se detiene la recuperación, el estado  pausado termina y el ascenso continúa.

Si la replicación del streaming está desactivada, el estado de la pausa puede continuar indefinidamente sin problema. Si la replicación  de la transmisión está en curso, los registros WAL continuarán siendo  recibidos, que eventualmente llenarán el espacio disponible en disco,  dependiendo de la duración de la pausa, la velocidad de la generación  WAL y espacio disponible en disco.