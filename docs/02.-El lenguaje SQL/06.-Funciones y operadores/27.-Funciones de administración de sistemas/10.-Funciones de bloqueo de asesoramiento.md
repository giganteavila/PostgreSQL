Las funciones que se muestran en el [cuadro 9.102](https://www.postgresql.org/docs/current/functions-admin.html#FUNCTIONS-ADVISORY-LOCKS-TABLE) gestionan las cerrajas de asesoramiento. Para más detalles sobre el uso adecuado de estas funciones, véase [la sección 13.3](https://www.postgresql.org/docs/current/explicit-locking.html#ADVISORY-LOCKS).5.

Todas estas funciones están destinadas a ser utilizadas para  bloquear los recursos definidos por aplicaciones, que pueden  identificarse ya sea por un solo valor de clave de 64 bits o dos valores clave de 32 bits (tenga en cuenta que estos dos espacios clave no se  superponen). Si otra sesión ya celebra una cerramiento conflictiva en el mismo identificador de recursos, las funciones esperarán hasta que el  recurso esté disponible, o devuelva un  `false`resultado, según corresponda para la función. Las cerrazones pueden ser  compartidas o exclusivas: una cerrazón compartida no entra en conflicto  con otras cerrajas compartidas en el mismo recurso, sólo con cerrajas  exclusivas. Las cerrazones se pueden llevar a nivel de sesión (de modo  que se celebren hasta que se publique o termine el período de sesiones) o a nivel de transacción (de modo que se celebren hasta que termine la  transacción actual; no hay ninguna disposición para la versión manual).  Las solicitudes de bloqueo a nivel de sesión múltiple se apilan, de modo que si el mismo identificador de recursos se bloquea tres veces debe  haber tres solicitudes de desbloqueo para liberar el recurso antes de  que termine el período de sesiones.

**Cuadro 9.102. Funciones de bloqueo de asesoramiento**

| Función                Descripción                           |
| ------------------------------------------------------------ |
| `pg_advisory_lock`(   *`key`*`bigint`) . `void`                 `pg_advisory_lock`(  *`key1`*`integer`,   *`key2`*`integer`) . `void`                Obtiene una cerra candado exclusivo a nivel de sesión, esperando si es necesario. |
| `pg_advisory_lock_shared`(   *`key`*`bigint`) . `void`                 `pg_advisory_lock_shared`(  *`key1`*`integer`,   *`key2`*`integer`) . `void`                Obtiene una cerra candado de asesoramiento a nivel de sesión compartida, esperando si es necesario. |
| `pg_advisory_unlock`(   *`key`*`bigint`) . `boolean`                 `pg_advisory_unlock`(  *`key1`*`integer`,   *`key2`*`integer`) . `boolean`                Lanza una cerraja de asesoramiento exclusiva previamente adquirida a nivel de sesión. Retorno  `true`si la cerraba se libera con éxito. Si no se hubiera mantenido la cerraja,  `false`es devuelto, y además, el servidor reportará una advertencia SQL. |
| `pg_advisory_unlock_all`() `void`                Pone a soltar todas las esclusas consultivas a nivel  de sesión celebradas en el actual período de sesiones. (Esta función se  invoca implícitamente al final de la sesión, incluso si el cliente se  desconecta de manera invergonal.) |
| `pg_advisory_unlock_shared`(   *`key`*`bigint`) . `boolean`                 `pg_advisory_unlock_shared`(  *`key1`*`integer`,   *`key2`*`integer`) . `boolean`                Lanza una cerraja de asesoramiento a nivel de sesión compartido previamente adquirida. Retorno  `true`si la cerraba se libera con éxito. Si no se hubiera mantenido la cerraja,  `false`es devuelto, y además, el servidor reportará una advertencia SQL. |
| `pg_advisory_xact_lock`(   *`key`*`bigint`) . `void`                 `pg_advisory_xact_lock`(  *`key1`*`integer`,   *`key2`*`integer`) . `void`                Obtiene una cerración de asesoramiento a nivel de transacción exclusiva, esperando si es necesario. |
| `pg_advisory_xact_lock_shared`(   *`key`*`bigint`) . `void`                 `pg_advisory_xact_lock_shared`(  *`key1`*`integer`,   *`key2`*`integer`) . `void`                Obtiene una cerracerración de asesoramiento a nivel de transacción compartida, esperando si es necesario. |
| `pg_try_advisory_lock`(   *`key`*`bigint`) . `boolean`                 `pg_try_advisory_lock`(  *`key1`*`integer`,   *`key2`*`integer`) . `boolean`                Obtiene una cerraba de asesoramiento exclusiva a  nivel de sesión si está disponible. Esto obtendrá la cerracerración  inmediatamente y regresará `true`, o retorno  `false`sin esperar si la cerracerraba no se puede adquirir inmediatamente. |
| `pg_try_advisory_lock_shared`(   *`key`*`bigint`) . `boolean`                 `pg_try_advisory_lock_shared`(  *`key1`*`integer`,   *`key2`*`integer`) . `boolean`                Obtiene una cerrague de asesoramiento a nivel de  sesión compartida si está disponible. Esto obtendrá la cerracerración  inmediatamente y regresará `true`, o retorno  `false`sin esperar si la cerracerraba no se puede adquirir inmediatamente. |
| `pg_try_advisory_xact_lock`(   *`key`*`bigint`) . `boolean`                 `pg_try_advisory_xact_lock`(  *`key1`*`integer`,   *`key2`*`integer`) . `boolean`                Obtiene un bloqueo exclusivo de asesoramiento a nivel de transacción si está disponible. Esto obtendrá la cerracerración  inmediatamente y regresará `true`, o retorno  `false`sin esperar si la cerracerraba no se puede adquirir inmediatamente. |
| `pg_try_advisory_xact_lock_shared`(   *`key`*`bigint`) . `boolean`                 `pg_try_advisory_xact_lock_shared`(  *`key1`*`integer`,   *`key2`*`integer`) . `boolean`                Obtiene un bloqueo de asesoramiento a nivel de  transacción compartido si está disponible. Esto obtendrá la  cerracerración inmediatamente y regresará `true`, o retorno  `false`sin esperar si la cerracerraba no se puede adquirir inmediatamente. |