[En](https://www.postgresql.org/docs/current/functions-textsearch.html#TEXTSEARCH-OPERATORS-TABLE) el [cuadro 9.42](https://www.postgresql.org/docs/current/functions-textsearch.html#TEXTSEARCH-OPERATORS-TABLE),  y  se resumen las funciones y los operadores que se proporcionan para la búsqueda completa de texto. Consulte [el capítulo 12](https://www.postgresql.org/docs/current/textsearch.html) para una explicación detallada de  's servicio de búsqueda de texto.

**Cuadro 9.42. Operadores de búsqueda de texto**

| Operadora              Descripción              Ejemplos (s) |
| ------------------------------------------------------------ |
| `tsvector``@@``tsquery`- `boolean`                 `tsquery``@@``tsvector`- `boolean`              Lo hace  `tsvector`partido `tsquery`? (Los argumentos pueden darse en cualquier orden.)               `to_tsvector('fat cats ate rats') @@ to_tsquery('cat & rat')`- |
| `text``@@``tsquery`- `boolean`              Hace cadena de texto, después de la invocación implícita de `to_tsvector()`, partido `tsquery`?               `'fat cats ate rats' @@ to_tsquery('cat & rat')`- |
| `tsvector``@@@``tsquery`- `boolean`                 `tsquery``@@@``tsvector`- `boolean`              Este es un sinónimo desprecado `@@`.               `to_tsvector('fat cats ate rats') @@@ to_tsquery('cat & rat')`- |
| `tsvector``||``tsvector`- `tsvector`              Concatenadas dos `tsvector`s. Si ambas entradas contienen posiciones de lexeme, las posiciones de la segunda entrada se ajustan en consecuencia.               `'a:1 b:2'::tsvector || 'c:1 d:2 b:3'::tsvector`- |
| `tsquery``&&``tsquery`- `tsquery`              YES dos `tsquery`en conjunto, produciendo una consulta que coincide con documentos que coinciden con ambas consultas de entrada.               `'fat | rat'::tsquery && 'cat'::tsquery`- |
| `tsquery``||``tsquery`- `tsquery`              Ociones dos `tsquery`es juntos, produciendo una consulta que coincide con los documentos que coinciden con cualquier consulta de entrada.               `'fat | rat'::tsquery || 'cat'::tsquery`- |
| `!!``tsquery`- `tsquery`              Negates a `tsquery`, produciendo una consulta que coincide con documentos que no coinciden con la consulta de entrada.               `!! 'cat'::tsquery`- |
| `tsquery``<->``tsquery`- `tsquery`              Construce una consulta de frases, que coincide si las dos consultas de entrada coinciden en lexemes sucesivos.               `to_tsquery('fat') <-> to_tsquery('rat')`- |
| `tsquery``@>``tsquery`- `boolean`              Hace primero  `tsquery`contiene el segundo? (Esto sólo considera si todas las lexemes que aparecen en  una consulta aparecen en la otra, ignorando a los operadores  combinados.)               `'cat'::tsquery @> 'cat & rat'::tsquery`- |
| `tsquery``<@``tsquery`- `boolean`              Primero es el primero.  `tsquery`contenida en el segundo? (Esto sólo considera si todas las lexemes que aparecen  en una consulta aparecen en la otra, ignorando a los operadores  combinados.)               `'cat'::tsquery <@ 'cat & rat'::tsquery`-                `'cat'::tsquery <@ '!cat & rat'::tsquery`- |

Además de estos operadores especializados, los operadores de comparación habituales que figuran en el [cuadro 9.1](https://www.postgresql.org/docs/current/functions-comparison.html#FUNCTIONS-COMPARISON-OP-TABLE) están disponibles para los tipos  `tsvector`y `tsquery`. Estos no son muy útiles para la búsqueda de texto, pero permiten, por  ejemplo, que los índices únicos se construyen sobre columnas de este  tipo.

**Cuadro 9.43. Funciones de búsqueda de texto**

| Función              Descripción              Ejemplos (s)   |
| ------------------------------------------------------------ |
| `array_to_tsvector`(  `text[]`) . `tsvector`              Convierte una variedad de cadenas de texto en a `tsvector`. Las cuerdas dadas se utilizan como lexemes as-is, sin más procesamiento. Los elementos de Array no deben ser cadenas vacías o `NULL`.               `array_to_tsvector('{fat,cat,rat}'::text[])`- |
| `get_current_ts_config`() `regconfig`              Devuelve el OID de la configuración de búsqueda de texto predeterminada actual (según lo establecido por [default.text.search.config](https://www.postgresql.org/docs/current/runtime-config-client.html#GUC-DEFAULT-TEXT-SEARCH-CONFIG)).               `get_current_ts_config()`- |
| `length`(  `tsvector`) . `integer`              Devuelve el número de lexemes en el `tsvector`.               `length('fat:2,4 cat:3 rat:5A'::tsvector)`- |
| `numnode`(  `tsquery`) . `integer`              Devuelve el número de lexemes más operadores en el `tsquery`.               `numnode('(fat & rat) | cat'::tsquery)`- |
| `plainto_tsquery`( [  *`config`*`regconfig`, ]   *`query`*`text`) . `tsquery`              Convierte texto en `tsquery`, la normalización de las palabras de acuerdo con la configuración  especificada o predeterminada. Cualquier puntuación en la cuerda se  ignora (no determina los operadores de consultas). La consulta  resultante coincide con documentos que contienen todas las palabras sin  parar en el texto.               `plainto_tsquery('english', 'The Fat Rats')`- |
| `phraseto_tsquery`( [  *`config`*`regconfig`, ]   *`query`*`text`) . `tsquery`              Convierte texto en `tsquery`, la normalización de las palabras de acuerdo con la configuración  especificada o predeterminada. Cualquier puntuación en la cuerda se  ignora (no determina los operadores de consultas). La consulta  resultante coincide con frases que contienen todas las palabras sin  parar en el texto.               `phraseto_tsquery('english', 'The Fat Rats')`-                `phraseto_tsquery('english', 'The Cat and Rats')`- |
| `websearch_to_tsquery`( [  *`config`*`regconfig`, ]   *`query`*`text`) . `tsquery`              Convierte texto en `tsquery`, la normalización de las palabras de acuerdo con la configuración  especificada o predeterminada. Las secuencias de palabras comidas se  convierten en pruebas de frases. La palabra "o o - se entiende como producir un operador de OR, y un guión produce un  operador de NO; se ignora otra puntuación. Esto se aproxima al  comportamiento de algunas herramientas de búsqueda web comunes.               `websearch_to_tsquery('english', '"fat rat" or cat dog')`- |
| `querytree`(  `tsquery`) . `text`              Produce una representación de la porción indexable de una `tsquery`. Un resultado que está vacío o justo  `T`indica una consulta no indexable.               `querytree('foo & ! bar'::tsquery)`- |
| `setweight`(  *`vector`*`tsvector`,   *`weight`*`"char"`) . `tsvector`              Asigna lo especificado  *`weight`*a cada elemento de la *`vector`*.               `setweight('fat:2,4 cat:3 rat:5B'::tsvector, 'A')`- |
| `setweight`(  *`vector`*`tsvector`,  *`weight`*`"char"`,   *`lexemes`*`text[]`) . `tsvector`              Asigna lo especificado  *`weight`*a elementos de la  *`vector`*que se enumeran en *`lexemes`*. Las cuerdas en  *`lexemes`*se toman como lexemes como-es, sin más procesamiento. Cadenas que no coinciden con ninguna lexeme en  *`vector`*son ignorados.               `setweight('fat:2,4 cat:3 rat:5,6B'::tsvector, 'A', '{cat,rat}')`- |
| `strip`(  `tsvector`) . `tsvector`              Eliba las posiciones y pesos del `tsvector`.               `strip('fat:2,4 cat:3 rat:5A'::tsvector)`- |
| `to_tsquery`( [  *`config`*`regconfig`, ]   *`query`*`text`) . `tsquery`              Convierte texto en `tsquery`, la normalización de las palabras de acuerdo con la configuración  especificada o predeterminada. Las palabras deben combinarse por su  validez  `tsquery`operadores.               `to_tsquery('english', 'The & Fat & Rats')`- |
| `to_tsvector`( [  *`config`*`regconfig`, ]   *`document`*`text`) . `tsvector`              Convierte texto en `tsvector`, la normalización de las palabras de acuerdo con la configuración  especificada o predeterminada. La información de posición está incluida  en el resultado.               `to_tsvector('english', 'The Fat Rats')`- |
| `to_tsvector`( [  *`config`*`regconfig`, ]   *`document`*`json`) . `tsvector`               `to_tsvector`( [  *`config`*`regconfig`, ]   *`document`*`jsonb`) . `tsvector`              Convierte cada valor de cadena en el documento JSON a a `tsvector`, la normalización de las palabras de acuerdo con la configuración  especificada o predeterminada. Los resultados se concatenizan en  documento para producir la salida. La información de posición se genera  como si existiera una palabra de stop entre cada par de valores de  cadena. (Cómalo de que la  de  de un objeto JSON depende de la implementación cuando la entrada es ; observar la diferencia en los ejemplos.)               `to_tsvector('english', '{"aa": "The Fat Rats", "b": "dog"}'::json)`-                `to_tsvector('english', '{"aa": "The Fat Rats", "b": "dog"}'::jsonb)`- |
| `json_to_tsvector`( [  *`config`*`regconfig`, ]  *`document`*`json`,   *`filter`*`jsonb`) . `tsvector`                `jsonb_to_tsvector`( [  *`config`*`regconfig`, ]  *`document`*`jsonb`,   *`filter`*`jsonb`) . `tsvector`              Selecciona cada elemento del documento JSON que se solicita por la  *`filter`*y convierte cada uno en un `tsvector`, la normalización de las palabras de acuerdo con la configuración  especificada o predeterminada. Los resultados se concatenizan en  documento para producir la salida. La información de posición se genera  como si existiera una palabra de parada entre cada par de elementos  seleccionados. (Cómeseo de que la  de  de un objeto JSON depende de la implementación cuando la entrada es `jsonb`.) El  *`filter`*debe ser un  `jsonb`array que contiene cero o más de estas palabras clave:  `"string"`(para incluir todos los valores de cuerda),  `"numeric"`(para incluir todos los valores numéricos),  `"boolean"`(para incluir todos los valores booleanos),  `"key"`(para incluir todas las llaves), o  `"all"`(incluir todo lo anterior). Como caso especial, el  también puede ser un simple valor JSON que es una de estas palabras clave.               `json_to_tsvector('english', '{"a": "The Fat Rats", "b": 123}'::json, '["string", "numeric"]')`-                `json_to_tsvector('english', '{"cat": "The Fat Rats", "dog": 123}'::json, '"all"')`- |
| `ts_delete`(  *`vector`*`tsvector`,   *`lexeme`*`text`) . `tsvector`              Elipulsa cualquier ocurrencia de lo dado  *`lexeme`*de la *`vector`*. El  *`lexeme`*la cuerda se trata como una lexeme as-is, sin más procesamiento.               `ts_delete('fat:2,4 cat:3 rat:5A'::tsvector, 'fat')`- |
| `ts_delete`(  *`vector`*`tsvector`,   *`lexemes`*`text[]`) . `tsvector`              Eliba cualquier ocurrencia de las lexemes en  *`lexemes`*de la *`vector`*. Las cuerdas en  *`lexemes`*se toman como lexemes como-es, sin más procesamiento. Cadenas que no coinciden con ninguna lexeme en  *`vector`*son ignorados.               `ts_delete('fat:2,4 cat:3 rat:5A'::tsvector, ARRAY['fat','rat'])`- |
| `ts_filter`(  *`vector`*`tsvector`,   *`weights`*`"char"[]`) . `tsvector`              Selecciona elementos con el dado  *`weights`*de la *`vector`*.               `ts_filter('fat:2,4 cat:3b,7c rat:5A'::tsvector, '{a,b}')`- |
| `ts_headline`( [  *`config`*`regconfig`, ]  *`document`*`text`,   *`query`*`tsquery`[,   *`options`*`text`] . `text`              Muestra, en una forma abreviada, el partido (es) para el  *`query`*en el *`document`*, que debe ser un texto en bruto, no una `tsvector`. Las palabras en el documento se normalizan de acuerdo con la  configuración especificada o predeterminada antes de coincidir con la  consulta. El uso de esta función se examina en [la Sección 12.3.](https://www.postgresql.org/docs/current/textsearch-controls.html#TEXTSEARCH-HEADLINE)4, que también describe la disponible *`options`*.               `ts_headline('The fat cat ate the rat.', 'cat')`- |
| `ts_headline`( [  *`config`*`regconfig`, ]  *`document`*`json`,   *`query`*`tsquery`[,   *`options`*`text`] . `text`               `ts_headline`( [  *`config`*`regconfig`, ]  *`document`*`jsonb`,   *`query`*`tsquery`[,   *`options`*`text`] . `text`              Las pantallas, en una forma abreviada, coinciden(es) para el  *`query`*que ocurren en valores de cuerda dentro de la JSON *`document`*. [Vea la Sección 12.3.4](https://www.postgresql.org/docs/current/textsearch-controls.html#TEXTSEARCH-HEADLINE) para más detalles.               `ts_headline('{"cat":"raining cats and dogs"}'::jsonb, 'cat')`- |
| `ts_rank`( [  *`weights`*`real[]`, ]  *`vector`*`tsvector`,   *`query`*`tsquery`[,   *`normalization`*`integer`] . `real`              Computa una partiguía que muestra lo bien que  *`vector`*coincide con el *`query`*. Véase [la sección 12.3.3 para](https://www.postgresql.org/docs/current/textsearch-controls.html#TEXTSEARCH-RANKING) más detalles.               `ts_rank(to_tsvector('raining cats and dogs'), 'cat')`- |
| `ts_rank_cd`( [  *`weights`*`real[]`, ]  *`vector`*`tsvector`,   *`query`*`tsquery`[,   *`normalization`*`integer`] . `real`              Computa una partición que muestra lo bien que el  *`vector`*coincide con el *`query`*, usando un algoritmo de densidad de cubierta. Véase [la sección 12.3.3 para](https://www.postgresql.org/docs/current/textsearch-controls.html#TEXTSEARCH-RANKING) más detalles.               `ts_rank_cd(to_tsvector('raining cats and dogs'), 'cat')`- |
| `ts_rewrite`(  *`query`*`tsquery`,  *`target`*`tsquery`,   *`substitute`*`tsquery`) . `tsquery`              Sustitula las ocurrencias de  *`target`*con  *`substitute`*dentro de la *`query`*. Para más detalles véase .               `ts_rewrite('a & b'::tsquery, 'a'::tsquery, 'foo|bar'::tsquery)`- |
| `ts_rewrite`(  *`query`*`tsquery`,   *`select`*`text`) . `tsquery`              Sustituida porciones de la  *`query`*de acuerdo con los objetivos (s) y los (s) de destino) obtenidos mediante la ejecución de una  `SELECT`comando. Para más detalles véase .               `SELECT ts_rewrite('a & b'::tsquery, 'SELECT t,s FROM aliases')`- |
| `tsquery_phrase`(  *`query1`*`tsquery`,   *`query2`*`tsquery`) . `tsquery`              Construce una frase que busca coincidencias de  *`query1`*y  *`query2`*en las lexemes sucesivas (sí como  `<->`operador).               `tsquery_phrase(to_tsquery('fat'), to_tsquery('cat'))`- |
| `tsquery_phrase`(  *`query1`*`tsquery`,  *`query2`*`tsquery`,   *`distance`*`integer`) . `tsquery`              Construce una frase que busca coincidencias de  *`query1`*y  *`query2`*que ocurren exactamente  *`distance`*lexemes aparte.               `tsquery_phrase(to_tsquery('fat'), to_tsquery('cat'), 10)`- |
| `tsvector_to_array`(  `tsvector`) . `text[]`              Convierte a  `tsvector`a una serie de lexemes.               `tsvector_to_array('fat:2,4 cat:3 rat:5A'::tsvector)`- |
| `unnest`(  `tsvector`) .  `setof record`(  *`lexeme`*`text`,  *`positions`*`smallint[]`,   *`weights`*`text`)              Expande a  `tsvector`en un juego de filas, uno por lexeme.               `select * from unnest('cat:3 fat:2,4 rat:5A'::tsvector)`-              `lexeme - posiciones - pesas ------------------------------------ gato, no 3, D. grasa - 2,4 euros de la D, D.D. rata de 5o` |

### Nota

Todas las funciones de búsqueda de texto que aceptan una opción opcional  `regconfig`argument usará la configuración especificada por [default.text.search.config](https://www.postgresql.org/docs/current/runtime-config-client.html#GUC-DEFAULT-TEXT-SEARCH-CONFIG) cuando se omite ese argumento.

Las funciones de la [Tabla 9.44](https://www.postgresql.org/docs/current/functions-textsearch.html#TEXTSEARCH-FUNCTIONS-DEBUG-TABLE) se enumeran por separado porque no suelen utilizarse en operaciones de  búsqueda de textos cotidianos. Son principalmente útiles para el  desarrollo y depuración de nuevas configuraciones de búsqueda de texto.

**Cuadro 9.44. Texto Buscar Funciones de depuración**

| Función              Descripción              Ejemplos (s)   |
| ------------------------------------------------------------ |
| `ts_debug`( [  *`config`*`regconfig`, ]   *`document`*`text`) .  `setof record`(  *`alias`*`text`,  *`description`*`text`,  *`token`*`text`,  *`dictionaries`*`regdictionary[]`,  *`dictionary`*`regdictionary`,   *`lexemes`*`text[]`)              Extractos y normaliza las fichas de la  *`document`*según la configuración de búsqueda de texto especificada o predeterminada, y  devuelve información sobre cómo se procesó cada ficha. Véase [la sección 12.8.1](https://www.postgresql.org/docs/current/textsearch-debugging.html#TEXTSEARCH-CONFIGURATION-TESTING) para más detalles.               `ts_debug('english', 'The Brightest supernovaes')`- |
| `ts_lexize`(  *`dict`*`regdictionary`,   *`token`*`text`) . `text[]`              Devuelve una matriz de lexemes de reemplazo si el token de entrada es conocido por el diccionario, o un array vacío si el token es conocido por el diccionario, pero es una palabra de parada, o NULL  si no es una palabra conocida. Para más detalles véase .               `ts_lexize('english_stem', 'stars')`- |
| `ts_parse`(  *`parser_name`*`text`,   *`document`*`text`) .  `setof record`(  *`tokid`*`integer`,   *`token`*`text`)              Extrae fichas de la  *`document`*usando el analizador. Véase [la sección 12.8.2](https://www.postgresql.org/docs/current/textsearch-debugging.html#TEXTSEARCH-PARSER-TESTING) para más detalles.               `ts_parse('default', 'foo - bar')`- |
| `ts_parse`(  *`parser_oid`*`oid`,   *`document`*`text`) .  `setof record`(  *`tokid`*`integer`,   *`token`*`text`)              Extrae fichas de la  *`document`*utilizando un analizador especificado por OID. Véase [la sección 12.8.2](https://www.postgresql.org/docs/current/textsearch-debugging.html#TEXTSEARCH-PARSER-TESTING) para más detalles.               `ts_parse(3722, 'foo - bar')`- |
| `ts_token_type`(   *`parser_name`*`text`) .  `setof record`(  *`tokid`*`integer`,  *`alias`*`text`,   *`description`*`text`)              Devuelve una tabla que describe cada tipo de token que el parser nombrado puede reconocer. Véase [la sección 12.8.2](https://www.postgresql.org/docs/current/textsearch-debugging.html#TEXTSEARCH-PARSER-TESTING) para más detalles.               `ts_token_type('default')`- |
| `ts_token_type`(   *`parser_oid`*`oid`) .  `setof record`(  *`tokid`*`integer`,  *`alias`*`text`,   *`description`*`text`)              Devuelve una tabla que describe cada tipo de token que un analizador especificado por OID puede reconocer. Véase [la sección 12.8.2](https://www.postgresql.org/docs/current/textsearch-debugging.html#TEXTSEARCH-PARSER-TESTING) para más detalles.               `ts_token_type(3722)`- |
| `ts_stat`(   *`sqlquery`*`text`[,   *`weights`*`text`] .  `setof record`(  *`word`*`text`,  *`ndoc`*`integer`,   *`nentry`*`integer`)              Ejega el *`sqlquery`*, que debe devolver un solo  `tsvector`columnas, y devuelve estadísticas sobre cada lexeme distintor contenida en los datos. Véase [la sección 12.4.4 para](https://www.postgresql.org/docs/current/textsearch-features.html#TEXTSEARCH-STATISTICS) más detalles.               `ts_stat('SELECT vector FROM apod')`- |