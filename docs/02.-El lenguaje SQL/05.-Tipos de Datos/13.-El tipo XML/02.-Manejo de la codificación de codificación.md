El cuidado debe tomarse cuando se trata de múltiples codificaciones  de caracteres en el cliente, el servidor y en los datos XML se pasan a  través de ellos. Cuando se utiliza el modo de texto para pasar consultas al servidor y los resultados de la consulta al cliente (que es el modo  normal), PostgreSQL convierte todos los datos de caracteres pasados  entre el cliente y el servidor y viceversa a la codificación de  caracteres del extremo respectivo; ver [Sección 24](https://www.postgresql.org/docs/current/multibyte.html).3. Esto incluye representaciones en cadena de valores XML, como en los  ejemplos anteriores. Esto normalmente significaría que las declaraciones de codificación contenidas en los datos XML pueden volverse inválidas  ya que los datos de caracteres se convierten en otras codificaciones  mientras se viaja entre cliente y servidor, porque la declaración de  codificación integrada no se cambia. Para hacer frente a este  comportamiento, las declaraciones de codificación contenidas en las  cadenas de caracteres presentadas para la entrada a la  `xml`tipo se *ignora*, y se supone que el contenido está en la codificación actual del  servidor. Por lo tanto, para el procesamiento correcto, las cadenas de  caracteres de los datos XML deben ser enviadas desde el cliente en la  codificación actual del cliente. Es responsabilidad del cliente  convertir documentos a la codificación actual del cliente antes de  enviarlos al servidor, o ajustar la codificación del cliente  apropiadamente. Sobre la salida, valores de tipo  `xml`no tendrá una declaración de codificación, y los clientes deben asumir que todos los datos están en la codificación actual del cliente.

Cuando se utiliza el modo binario para pasar los parámetros de  consulta al servidor y los resultados de consulta al cliente, no se  realiza ninguna conversión de codificación, por lo que la situación es  diferente. En este caso, se observará una declaración de codificación en los datos XML, y si está ausente, se supone que los datos están en  UTF-8 (según lo requerido por el estándar XML; tenga en cuenta que  PostgreSQL no admite UTF-16). En cuanto a la salida, los datos tendrán  una declaración de codificación que especificará la codificación del  cliente, a menos que la codificación del cliente sea UTF-8, en cuyo caso se omitirá.

Huelga decir que el procesamiento de datos XML con PostgreSQL  será menos propenso a errores y más eficiente si la codificación de  datos XML, codificación de clientes y codificación del servidor son las  mismas. Dado que los datos XML se procesan internamente en UTF-8, los  cálculos serán más eficientes si la codificación del servidor también es UTF-8.

### Precaución

Algunas funciones relacionadas con XML pueden no funcionar en  absoluto en datos no-ASCII cuando la codificación del servidor no es  UTF-8. Se sabe que esto es un problema para  `xmltable()`y  `xpath()`en particular.